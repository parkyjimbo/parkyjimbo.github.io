---
layout: post
title: Ubuntu Enterprise Cloud
date: '2010-06-02T16:32:00.017+01:00'
author: jimbuzz
tags:
- Hadoop Cluster Passwordless SSH login
modified_time: '2010-06-03T15:19:30.134+01:00'
blogger_id: tag:blogger.com,1999:blog-4676883399643590331.post-8786513776394102748
blogger_orig_url: http://parkyjimbo.blogspot.com/2010/06/ubuntu-enterprise-cloud.html
---

<b>Hadoop Cluster</b><br /><br />I had problems with ssh passwordless logins taking ages on the hadoop Ubuntu cluster I was working on. This was fixed by adding a 'UseDNS no' entry to /etc/ssh/sshd_config file and restarting the ssh daemon using the command sudo /etc/init.d/ssh restart.<br /><br />The compute nodes on the cluster could not access the internet so NAT had to be setup on the head hadoop node. <br /><br />Where eth0 is the network card with access to the private network.<br />The following NAT was setup as follows using the command 'sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE' and '/proc/sys/net/ipv4/ip_forward' file entry should be 1. <br /><br />Restart dnsmasq using the following command 'sudo /etc/init.d/dnsmasq restart'. <br /><br />Configure the NAT with the following command 'iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE'. Where eth1 is the network card with access to the internet.<br /><br />I tested the cluster by pinging a url on the internet with the command <i>'ping -c 4 google.com'</i> the result was as follows<br /><br /><i>PING google.com (209.85.227.104) 56(84) bytes of data.<br />64 bytes from wy-in-f104.1e100.net (209.85.227.104): icmp_seq=1 ttl=51 time=18.8 ms<br />64 bytes from wy-in-f104.1e100.net (209.85.227.104): icmp_seq=2 ttl=51 time=18.8 ms<br />64 bytes from wy-in-f104.1e100.net (209.85.227.104): icmp_seq=3 ttl=51 time=18.9 ms<br />64 bytes from wy-in-f104.1e100.net (209.85.227.104): icmp_seq=4 ttl=51 time=18.8 ms<br /><br />--- google.com ping statistics ---<br />4 packets transmitted, 4 received, 0% packet loss, time 3004ms<br />rtt min/avg/max/mdev = 18.800/18.840/18.912/0.106 ms<br /></i><br /><br />thus proving that the NAT settings had worked.<br /><br />Information used was from the page http://www.ubuntugeek.com/sharing-internet-connection-in-ubuntu.html for this blog