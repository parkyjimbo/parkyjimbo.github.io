---
layout: post
title: Add Serial Port to TP-Link MR3420
date: '2012-01-20T12:42:00.001Z'
author: jimbuzz
tags: 
modified_time: '2012-01-20T15:49:22.016Z'
thumbnail: http://2.bp.blogspot.com/-shn1UVhm4q4/TxlfOD3CRVI/AAAAAAAAAII/UkkoEYt7CmU/s72-c/MR3420PCB.jpg
blogger_id: tag:blogger.com,1999:blog-4676883399643590331.post-3478570953108983329
blogger_orig_url: http://parkyjimbo.blogspot.com/2012/01/add-serial-port-to-tp-link-mr3420.html
---

<P>I added a serial port to the MR3420 by first opening up the case. There are four screws under the rubber feet on the base of the case. Once open I located the serial port on the board below the white label VcGdRxTx I have placed on the board on the right. The four connections are as per the label with pin one identified by the box round the square PCB pad. </P><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-shn1UVhm4q4/TxlfOD3CRVI/AAAAAAAAAII/UkkoEYt7CmU/s1600/MR3420PCB.jpg" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="240" width="320" src="http://2.bp.blogspot.com/-shn1UVhm4q4/TxlfOD3CRVI/AAAAAAAAAII/UkkoEYt7CmU/s320/MR3420PCB.jpg" /></a></div><P>I then added a small 4 way socket on the side of the case. This socket was glued in with Epoxy resin and it was wired up to the pins on the MR3420 board. I then used a Sparkfun 3.3V FTDI USB to serial adapter to interface between my PC and the MR3420.  <div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-j_cfFEoLKf0/TxmJrop8eGI/AAAAAAAAAIU/F-Dgn-J8qQk/s1600/MR3420SerialConn.jpg" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="320" width="240" src="http://2.bp.blogspot.com/-j_cfFEoLKf0/TxmJrop8eGI/AAAAAAAAAIU/F-Dgn-J8qQk/s320/MR3420SerialConn.jpg" /></a></div>  </P><P>I use Ubuntu 11.10 a Linux Distribution on my PC, to connect to the MR3420 via a program run in a Terminal window called minicom. When the USB to serial adapter is plugged in to the USB socket on the PC use <i>dmesg</i> on the command line to display what port the adapter is using, mine was ttyUSB1. You will need this info to set-up minicom. The serial communication paramters are Serial Device /dev/ttyUSB1 , 115200 baud , 8 data bits , 1 Stop Bit , No parity , No Hardware flow control and No Software flow control. </P><P>When everything is plugged in and the MR3420 is powered up you should see the progress of the boot sequence and after this the command prompt in the Terminal window on the PC. You should then load new <a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420">OpenWRT</a> firmware for the correct version of your MR3420 via the Web configuration, this will allow new packages to be installed and customisation of the router. </P> <div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-ID9C7TjKIGA/TxmL5zA--zI/AAAAAAAAAIg/QZET1-5KtdI/s1600/OpenwrtTerm.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" height="185" width="320" src="http://1.bp.blogspot.com/-ID9C7TjKIGA/TxmL5zA--zI/AAAAAAAAAIg/QZET1-5KtdI/s320/OpenwrtTerm.png" /></a></div> <P>The picture above is the console view of my MR3420 and is displaying the details of the CPU the router has, this was displayed by typing "cat /proc/cpuinfo" without the quotes. I hope you find this blog entry useful.